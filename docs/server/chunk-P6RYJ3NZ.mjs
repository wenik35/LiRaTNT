import './polyfills.server.mjs';
import{F as A,G as P,I as M,J as _,K as z,L as $,O as Q,U as K,a as T,b as l,c as g,d as y,e as F,f as V,g as f,h as u,i as I,j as d,k as a,l as s,m as b,n as x,o as p,p as w,q as O,r as U,s as L,t as N,u as C,v as S,w as j,x as m,y as k}from"./chunk-PDIPJ33W.mjs";var h=(()=>{let t=class t{constructor(){this.availableCards=[],this.cachedListenerFuns=[];for(let e=0;e<120;e++)this.availableCards.push(e)}swapCard(e,i){this.cachedCallbackFun?(this.cachedCallbackFun(e),i(this.cachedCardId),this.cachedCallbackFun=void 0,this.cachedListenerFuns.forEach(r=>{r()}),this.cachedListenerFuns=[]):e==this.cachedCardId&&this.cachedCallbackFun?this.cachedCallbackFun=void 0:(this.cachedCardId=e,this.cachedCallbackFun=i)}drawCard(){let e=Math.floor(Math.random()*this.availableCards?.length),i=this.availableCards[e];return this.availableCards.splice(e,1),i}deleteCache(){this.cachedCallbackFun=void 0,this.cachedCardId=void 0}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Y=n=>({active:n}),R=(()=>{let t=class t{constructor(e){this.cardExchangeService=e,this.ev=new F,this.cardId=-1,this.isActive=!1}cardClicked(){this.isActive=!0,this.cardExchangeService.cachedListenerFuns?.push(()=>{this.isActive=!1}),this.ev.emit(this.cardId)}};t.\u0275fac=function(i){return new(i||t)(u(h))},t.\u0275cmp=l({type:t,selectors:[["card-container"]],inputs:{cardId:"cardId"},outputs:{ev:"ev"},standalone:!0,features:[m],decls:1,vars:5,consts:[[3,"click","ngClass","src"]],template:function(i,r){i&1&&(a(0,"img",0),p("click",function(){return r.cardClicked()}),s()),i&2&&(O("src","assets/cards/",r.cardId,".jpg",V),d("ngClass",k(3,Y,r.isActive)))},dependencies:[M],styles:["img[_ngcontent-%COMP%]{border:1px solid black}.active[_ngcontent-%COMP%]{border:2px solid red!important}"]});let n=t;return n})();function Z(n,t){if(n&1){let o=x();a(0,"card-container",1),p("ev",function(i){g(o);let r=w();return y(r.cardChanged(i))}),s()}if(n&2){let o=t.$implicit;d("cardId",o)}}var v=(()=>{let t=class t{constructor(e){this.cardExchangeService=e,this.ev=new F,this.isExtendable=!0,this.cardIds=[-1]}cardChanged(e){this.cachedId&&this.cachedId==e?this.cachedId=void 0:this.cachedId&&this.cardIds.includes(e)?(this.replaceCardId(this.cachedId,-2),this.replaceCardId(e,this.cachedId),this.replaceCardId(-2,e),this.cardExchangeService.deleteCache(),this.cachedId=void 0):this.cardExchangeService.swapCard(e,i=>{if(this.replaceCardId(e,i),this.cachedId=void 0,this.isExtendable){let r=this.cardIds.findIndex(c=>c==-1);r==-1&&this.cardIds.push(-1),r=this.cardIds.findIndex(c=>c==-1),r<this.cardIds.length-1&&this.cardIds.length>1&&this.cardIds.splice(r,1)}})}replaceCardId(e,i){let r=this.cardIds.findIndex(c=>c==e);this.cardIds[r]=i}};t.\u0275fac=function(i){return new(i||t)(u(h))},t.\u0275cmp=l({type:t,selectors:[["card-collection"]],inputs:{isExtendable:"isExtendable"},outputs:{ev:"ev"},standalone:!0,features:[m],decls:1,vars:1,consts:[[3,"cardId","ev",4,"ngFor","ngForOf"],[3,"ev","cardId"]],template:function(i,r){i&1&&I(0,Z,1,1,"card-container",0),i&2&&d("ngForOf",r.cardIds)},dependencies:[R,_]});let n=t;return n})();function ee(n,t){if(n&1){let o=x();a(0,"div",4)(1,"h1",3),p("click",function(){let i=g(o).$implicit,r=w();return y(r.deletePlayer(i.id))}),C(2,"X"),s(),a(3,"span"),C(4),s(),b(5,"card-collection"),s()}if(n&2){let o=t.$implicit;f(4),S(o.name)}}var q=(()=>{let t=class t{constructor(e){this.highestPlayerId=-1,this.players=[{id:this.highestPlayerId++,name:"test"}],this.addUserInput=e.getElementById("add-user-input")}addUser(){let e=this.addUserInput.value;e&&(this.addUserInput.textContent="",this.players.push({id:this.highestPlayerId++,name:e}))}deletePlayer(e){let i=this.players.findIndex(r=>r.id=e);this.players.splice(i,1)}};t.\u0275fac=function(i){return new(i||t)(u(P))},t.\u0275cmp=l({type:t,selectors:[["user-list"]],standalone:!0,features:[m],decls:7,vars:1,consts:[["class","player-container",4,"ngFor","ngForOf"],["id","user-list"],["id","add-user-input"],[3,"click"],[1,"player-container"]],template:function(i,r){i&1&&(a(0,"h1"),C(1,"Spieler:"),s(),I(2,ee,6,1,"div",0),a(3,"div",1),b(4,"input",2),a(5,"button",3),p("click",function(){return r.addUser()}),C(6,"Spieler hinzuf\xFCgen"),s()()),i&2&&(f(2),d("ngForOf",r.players))},dependencies:[_,v],styles:[`user-list .player-container{font-size:xx-large;display:flex;flex-direction:row;align-items:center}user-list .player-container h1{cursor:pointer;margin-right:1rem}user-list .player-container h1:hover{color:red}user-list .player-container span{min-width:15rem}user-list .player-container img{height:9vh;margin-left:.5rem}
`],encapsulation:2});let n=t;return n})();var te=n=>({inactive:n});function ie(n,t){if(n&1){let o=x();a(0,"button",3),p("click",function(){let i=g(o).$implicit;return y(i.action())}),C(1),s()}if(n&2){let o=t.$implicit;d("ngClass",k(2,te,!o.active)),f(),S(o.name)}}var B=(()=>{let t=class t{constructor(e){this.cardExchangeService=e,this.buttons=[]}ngAfterViewInit(){this.buttons.push({name:"Neue Karte ziehen",active:!0,action:()=>{let e=this.cardExchangeService.drawCard();this.mainCardDisplay.cardIds[0]=e,this.cardChanged([e])}},{name:"Karte wegwerfen",active:!1,action:()=>{this.mainCardDisplay.cardIds[0]=-1,this.cardChanged([-1])}})}cardChanged(e){e[0]==-1?(this.buttons[0].active=!0,this.buttons[1].active=!1):(this.buttons.find(i=>i.name="Neue Karte ziehen").active=!1,this.buttons[1].active=!0),this.cardExchangeService.cachedListenerFuns?.push(()=>{this.buttons[0].active=!0,this.buttons[1].active=!1})}};t.\u0275fac=function(i){return new(i||t)(u(h))},t.\u0275cmp=l({type:t,selectors:[["main-display"]],viewQuery:function(i,r){if(i&1&&U(v,5),i&2){let c;L(c=N())&&(r.mainCardDisplay=c.first)}},standalone:!0,features:[m],decls:3,vars:2,consts:[[1,"button-container"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"middle-card",3,"ev","isExtendable"],[3,"click","ngClass"]],template:function(i,r){i&1&&(a(0,"div",0),I(1,ie,2,4,"button",1),s(),a(2,"card-collection",2),p("ev",function(W){return r.cardChanged(W)}),s()),i&2&&(f(),d("ngForOf",r.buttons),f(),d("isExtendable",!1))},dependencies:[_,M,v],styles:[`.inactive{display:none}.button-container{display:flex;flex-direction:row}img{height:50vh}
`],encapsulation:2});let n=t;return n})();var H=(()=>{let t=class t{constructor(){this.title="liratnt"}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=l({type:t,selectors:[["app-root"]],standalone:!0,features:[j([h]),m],decls:5,vars:0,consts:[[1,"main"],["id","content"],[1,"column"],[1,"side-bar","column"]],template:function(i,r){i&1&&(a(0,"main",0)(1,"div",1),b(2,"user-list",2)(3,"main-display",2)(4,"card-collection",3),s()())},dependencies:[v,q,B],styles:[`#content{display:grid;grid-template-columns:repeat(3,1fr);font-family:sans-serif}#content .column{display:flex;flex-direction:column;align-items:center}#content main-display{height:50vh}#content .side-bar{display:flex;flex-direction:column}#content .side-bar img{max-height:10rem}
`],encapsulation:2});let n=t;return n})();var X=[];var G={providers:[K(X),$()]};var ne={providers:[Q()]},J=A(G,ne);var re=()=>z(H,J),$e=re;export{$e as a};
